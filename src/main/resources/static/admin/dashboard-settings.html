<div class="container" id="dashboard_content_base">
    <div class="row justify-content-start">
        <div v-if="!userHasManagePrivilege" class="col">
            <div class="container" style="height:300px">
                <div
                    class="box full text-center text-danger d-flex justify-content-center align-items-center flex-column">
                    <i class=" fa fa-times-circle-o" aria-hidden="true" style="font-size: 3.5em"></i>
                    <p class="text-secondary mt-2"><span class="h4">403</span><br /> 您无权修改系统设置</p>
                    <button type="button" class="btn btn-primary" onclick="location.href='../'">返回首页</button>
                </div>
            </div>
        </div>
        <div v-else class="col">
            <div class="box">
                <ul class="nav nav-tabs" id="msettings-tab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="settings-tab" data-toggle="tab" href="#msettings-tab-all"
                            role="tab" aria-selected="true" v-on:click="">系统设置</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="log-tab" data-toggle="tab" href="#msettings-tab-log" role="tab"
                            aria-selected="false" v-on:click="loadOpLog(true)">日志查看</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="log-others" data-toggle="tab" href="#msettings-tab-others" role="tab"
                            aria-selected="false" v-on:click="">其他</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="log-about" data-toggle="tab" href="#msettings-tab-about" role="tab"
                            aria-selected="false" v-on:click="loadVersion()">关于程序以及帮助</a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane fade show active" role="tabpanel" id="msettings-tab-all">
                        <form class="mt-3" v-if="settingsData">
                            <div class="from-group row">
                                <div class="form-group col-md-3 text-right-md"></div>
                                <div class="form-group col-md-9">
                                    <div class="custom-control custom-checkbox">
                                        <input type="checkbox" class="custom-control-input" id="settingSendStat" v-model="setSendStats">
                                        <label class="custom-control-label" for="settingSendStat">是否收集用户浏览统计数据</label>
                                    </div>
                                </div>
                            </div>
                            <div class="from-group row">
                                <div class="form-group col-md-3 text-right-md"></div>
                                <div class="form-group col-md-9">
                                    <div class="custom-control custom-checkbox">
                                        <input type="checkbox" class="custom-control-input"
                                            id="settingAnonymousComment" v-model="setAnonymousComment">
                                        <label class="custom-control-label"
                                            for="settingAnonymousComment">是否允许匿名用户评论</label>
                                    </div>
                                </div>
                            </div>
                            <div class="from-group row">
                                    <div class="form-group col-md-3 text-right-md"></div>
                                    <div class="form-group col-md-9">
                                        <div class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input"
                                                id="settingEnableRegister" v-model="setEnableRegister">
                                            <label class="custom-control-label"
                                                for="settingEnableRegister">是否允许用户注册</label>
                                        </div>
                                    </div>
                                </div>
                            <div class="from-group row">
                                <div class="form-group col-md-3 text-right-md"></div>
                                <div class="form-group col-md-9">
                                    <div class="custom-control custom-checkbox">
                                        <input type="checkbox" class="custom-control-input" id="settingEnableSearch" v-model="setEnableSearch">
                                        <label class="custom-control-label" for="settingEnableSearch">是否开启搜索功能</label>
                                    </div>
                                </div>
                            </div>
                            <div class="from-group row">
                                <div class="form-group col-md-3 text-right-md">
                                    <label class="my-1 mr-2" for="settingMaxStatSaveDays">用户浏览统计数据和日志最大保存天数</label>
                                </div>
                                <div class="form-group col-md-9">
                                    <select class="custom-select my-1 mr-sm-2" id="settingMaxStatSaveDays" v-model="setMaxStatSaveDays">
                                        <option selected>请选择</option>
                                        <option value="5">5 天</option>
                                        <option value="10">10 天</option>
                                        <option value="20">20 天</option>
                                        <option value="30">30 天</option>
                                        <option value="40">40 天</option>
                                        <option value="50">50 天</option>
                                        <option value="60">60 天</option>
                                        <option value="90">90 天</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="form-group col-md-3 text-right-md">
                                    <label for="settingImageCenter">图片中心地址</label>
                                </div>
                                <div class="form-group col-md-9">
                                    <input type="text" class="form-control" id="settingImageCenter"  v-model="setimageCenter"
                                        aria-describedby="settingImageCenterHelp" placeholder="http(s)://">
                                    <small id="settingImageCenterHelp"
                                        class="form-text text-muted">博客图片静态存取服务器，推荐使用nginx开一个新子站专门存放图片</small>
                                </div>
                            </div>
                            <div class="from-group from-inline">
                                <button type="button" class="btn btn-primary mr-2" v-on:click="saveSettings()"><i
                                    class="fa fa-floppy-o mr-2"></i>保存更改</button>
                            </div>
                        </form>
                        <div v-else-if="settingsLoadFailed" class="text-danger text-center mt-3 mb-3">
                            加载设置失败！
                        </div>
                    </div>
                    <div class="tab-pane fade show" role="tabpanel" id="msettings-tab-log">
                        <common-table ref="tableAll" v-bind:columns="tableAllColumns" v-bind:items="tableAllDatas"
                            v-bind:loaded-status="tableAllLoadStatus" 
                            v-bind:null-text="'当前没有数据'"
                            v-on:retry-load="loadOpLog(true)">
                        </common-table>
                        <common-pagination ref="tablePaginationAll" v-bind:current-page="tableAllPageCurrent"
                            v-bind:all-page="tableAllPageAll" v-on:item-click="tableAllPagerClick"
                            v-on:page-size-changed="tableAllPageSizeChanged">
                        </common-pagination>
                    </div>
                    <div class="tab-pane fade show" role="tabpanel" id="msettings-tab-others">

                    </div>
                    <div class="tab-pane fade show" role="tabpanel" id="msettings-tab-about">
                        <h3 class="mt-3">程序信息：</h3>
                        <p>程序版本： {{ version }}</p>
                    </div>
                </div>


            </div>
        </div>
    </div>
</div>
<div class="dashboard-footer"><span>© 2019 Theme designed by DreamFish</span></div>