var loader_arr_css=new Array,loader_arr_js=new Array,loader_stats="not load",loader_finish_callback=new Array,loader_endload_callback=new Array,loader_all_finished=!1,allJsCount=0,allCssCount=0,loadedJsCount=0,loadingJsIndex=0,loadedCssCount=0,uidz=1123493,uidg=15,loading_progress_bar=null,body=null,doNotHideMask=!1;function setLoaderCSS(css_arr){loader_arr_css=css_arr}function setLoaderJS(js_arr){loader_arr_js=js_arr}function appendLoaderCSS(css){loader_arr_css.push(css),allCssCount++}function appendLoaderJS(js){loader_arr_js.push(js),allJsCount++}function getLoaderStatus(){return loader_stats}function setLoaderFinishCallback(callback){loader_finish_callback.push(callback)}function setLoaderEndCallback(callback){loader_endload_callback.push(callback)}function setLoaderNotHideMask(){doNotHideMask=!0}function setLoaderHideMaskNow(){loaderHideMsak()}function preRecUrl(url,pre){return 0==url.indexOf("cdn:")?localDebug?"/assets/"+url.substring(4):(https,"https://cdn.imyzc.com/"+url.substring(4)):-1==url.indexOf("/")?"/assets/"+pre+"/"+url:url}function loadCSS(url){var loaded=!1,cssLink=document.createElement("link");null!=url&&""!=url||(loadedCssCount++,callback(!0)),cssLink.rel="stylesheet",cssLink.rev="stylesheet",cssLink.type="text/css",cssLink.href=preRecUrl(url,"css"),cssLink.onload=cssLink.onreadystatechange=function(){loaded||cssLink.readyState&&!/loaded|complete/.test(cssLink.readyState)||(cssLink.onload=cssLink.onreadystatechange=null,loaded=!0,loadedCssCount++,update_progress())},document.getElementsByTagName("head")[0].appendChild(cssLink)}function loadJS(src,callback){if(null!=src&&""!=src){var script=document.createElement("script"),head=document.getElementsByTagName("head")[0],loaded=!1;script.setAttribute("type","text/javascript"),script.src=preRecUrl(src,"js"),"function"==typeof callback&&(script.onload=script.onreadystatechange=function(){loaded||script.readyState&&!/loaded|complete/.test(script.readyState)||(script.onload=script.onreadystatechange=null,callback(loaded=!0))}),setTimeout(function(){loaded||callback(!1)},15e3),head.appendChild(script)}else"function"==typeof callback&&callback(!0)}function loaderLoadBackgroundImage(){"undefined"!=typeof jQuery&&($(".dealy-load-bgimg").each(function(){var data="url('"+$(this).attr("data-original")+"')";$(this).css("background-image",data)}),$(".img-async").each(function(){$(this).attr("src",$(this).attr("data-original"))}))}function calc_precent(){return parseInt(loadedJsCount/allJsCount*50)+parseInt(loadedCssCount/allCssCount*50)}function update_progress(){loading_progress_bar.setAttribute("style","width:"+calc_precent()+"%;")}function loaderTestConfig(){https=0==window.document.location.href.indexOf("https://");var localhostPath=getHostName();localDebug=0==localhostPath.indexOf("localhost"),allCssCount=loader_arr_css.length,allJsCount=loader_arr_js.length}function loaderFinishTest(){if(!loader_all_finished){if(loader_all_finished=!0,console.log("Loaded JS : "+loadedJsCount+"/"+allJsCount),console.log("Loaded CSS : "+loadedCssCount+"/"+allCssCount),"undefined"==typeof jQuery){document.getElementById("loading").setAttribute("style","display:none;");var errtip=document.createElement("div");return errtip.id="noscript-warning",errtip.innerHTML='<div id="noscript-warning" style="color:#fff;background-color:#AE0000;position:fixed;left:0;top:5px;right:0;padding:3px;width: 100%;z-index: 1050;text-align: center;">我们需要一些额外的 JavaScript 才能正常显示页面, 但是未能成功加载，您看到的页面可能不正常.   <a href="javascript:void(0)" onclick="location.reload(true);">刷新</a></div>',void document.getElementById("loading-progress-bar").appendChild(errtip)}loadedJsCount<allJsCount&&($("#loading-progress-bar").css("color","#fff").css("background-color","#AE0000").css("width","100%"),setTimeout(function(){setTimeout(function(){$("#loading-progress-bar").prepend($('<div id="noscript-warning" style="color:#fff;background-color:#8E0000;position:fixed;left:0;top:5px;right:0;padding:3px;width: 100%;z-index: 1050;text-align: center;">我们需要一些额外的 JavaScript 才能正常显示页面, 但是未能成功加载，您看到的页面可能不正常.  <a href="javascript:void(0)" onclick="loaderEnd(true);">关闭并继续浏览</a> | <a href="javascript:void(0)" onclick="location.reload(true);">刷新</a></div>'))},300)},500))}}function loaderJsWorker(){loadJS(loader_arr_js[loadingJsIndex],function(succeed){succeed&&loadedJsCount++,loadingJsIndex++,update_progress(),loadingJsIndex<allJsCount&&loaderJsWorker(),loadingJsIndex>=allJsCount&&loaderEnd(!1)})}function loaderStart(){if(loaderCreateUI(),loaderTestConfig(),setTimeout(function(){loaderFinishTest()},2e4),loader_arr_css instanceof Array)for(var j=0,len=loader_arr_css.length;j<len;j++)loadCSS(loader_arr_css[j]);loader_arr_js instanceof Array?loaderJsWorker():loaderEnd(!1)}function loaderEnd(click){if(loader_arr_css instanceof Array&&loadedCssCount<allCssCount)for(var j=loadedCssCount,len=loader_arr_css.length;j<len;j++)loadCSS(loader_arr_css[j]);loaderCallcallbacks(loader_endload_callback),loading_progress_bar.setAttribute("style","width:100%"),click||loaderFinishTest(),loaderLoadBackgroundImage(),loaderFinish(click)}function loaderCallcallbacks(callbacks){callbacks.forEach(function(e){"function"==typeof e&&e()})}function loaderFinish(click){if("undefined"==typeof jQuery)body.setAttribute("class","no-scroll"),body.setAttribute("style","visibility:visible;"),body.innerHTML="<h1 style='text-align:center;'>加载必要的 JS 失败</h1>";else{if(click?($("#noscript-warning").fadeOut(),$("#loading-progress-bar").css("height","5px")):loadedJsCount>=allJsCount&&($("#loading-progress-bar").css("height","0px").css("color","").css("background-color",""),$("#noscript-warning").remove(),setTimeout(function(){$("#loading-progress-bar").css("display","none").css("height","5px")},300)),blogInitnaize(),loaderCallcallbacks(loader_finish_callback),doNotHideMask)return;loaderHideMsak()}}function loaderHideMsak(){$("#loading").fadeOut(800),$("body").removeClass("not-load"),$("body").removeClass("no-scroll")}function loaderCreateUI(){body=document.getElementsByTagName("body")[0],loading_progress_bar=document.createElement("div"),pre_loader=document.createElement("div"),body.appendChild(loading_progress_bar),body.appendChild(pre_loader),body.setAttribute("class","no-scroll "+body.getAttribute("class").replace("not-load","")),loading_progress_bar.outerHTML='<div id="loading-progress-bar"></div>',pre_loader.outerHTML='\x3c!--Loading overlay--\x3e<div id="loading" style="z-index:1001;"><div id="loading-progress-bg"></div><div id="loading-center"><div id="loading-center-absolute"><span id="loading-simple-roll"></span></div><p>加载中<br />很快就好了</p></div></div>',loading_progress_bar=document.getElementById("loading-progress-bar")}function blogInitnaize(){var top=!0,currentTop=!0,stopResizeNav=!1,width=$(window).width();if("header-minimum"==$(".main-menu").first().parent().attr("id")&&(stopResizeNav=!0),width<768?($(".main-menu").css("padding-top","15px"),$(".main-menu").css("padding-bottom","15px")):0==$("#header-minimum").length?($(".main-menu").css("padding-top","40px"),$(".main-menu").css("padding-bottom","30px")):($(".main-menu").css("padding-top","15px"),$(".main-menu").css("padding-bottom","15px")),$(".main-menu").hasClass("noscroll")||((top=$(this).scrollTop()<100)||stopResizeNav?$(".main-menu-white-auto-mask").addClass("main-menu-white-fade-mask"):($(".go-top").fadeIn(),$(".main-menu").addClass("header-scrolled"),width>768&&($(".main-menu").css("padding-top","15px"),$(".main-menu").css("padding-bottom","15px")))),void 0!==$("img").lazyload&&$("img").lazyload({effect:"fadeIn",threshold:300}),$(".img-async").each(function(){null!=$(this).attr("data-original")&&$(this).attr("src",$(this).attr("data-original"))}),$(window).resize(function(){width=$(window).width()}),void 0!==$("img").superfish&&$(".nav-menu").superfish({animation:{opacity:"show"},speed:200}),$("#nav-menu-container").length){var $mobile_nav=$("#nav-menu-container").clone().prop({id:"mobile-nav"});$mobile_nav.find("> ul").attr({class:"",id:""}),$("body").append($mobile_nav),$("body").append('<div id="mobile-body-overly"></div>'),$("#mobile-nav").find(".menu-has-children").prepend('<i class="fa fa-angle-down"></i>').prop("href","javascript;"),$("#mobile-nav").find(".menu-has-children ul").attr("style","display:none;"),$("mobile-body-overly").attr("style","display:none;"),$(".menu-has-children a").click(function(e){$(this).toggleClass("menu-item-active"),$(this).nextAll("ul").eq(0).slideToggle(),$(this).prev().toggleClass("reverse-icon")}),$(".menu-has-children i").click(function(e){$(this).next().toggleClass("menu-item-active"),$(this).nextAll("ul").eq(0).slideToggle(),$(this).toggleClass("reverse-icon")}),$("#mobile-nav-toggle").click(function(e){$("body").toggleClass("mobile-nav-active"),$("#mobile-nav-toggle i").toggleClass("fa-times fa-bars"),$("#mobile-body-overly").toggle()}),$(document).click(function(e){var container=$("#mobile-nav, #mobile-nav-toggle");container.is(e.target)||0!==container.has(e.target).length||$("body").hasClass("mobile-nav-active")&&($("body").removeClass("mobile-nav-active"),$("#mobile-nav-toggle i").toggleClass("fa-times fa-bars"),$("#mobile-body-overly").fadeOut())})}else $("#mobile-nav, #mobile-nav-toggle").length&&$("#mobile-nav, #mobile-nav-toggle").hide();$(window).scroll(function(){$(this).scrollTop()<300?$(".go-top").fadeOut():$(".go-top").fadeIn()}),$(".go-top").click(function(event){event.preventDefault(),$("html, body").animate({scrollTop:0},300)}),$(".go-top").tooltip({boundary:"window",title:"回到顶部",placement:"left",delay:200}),$('[data-toggle="tooltip"]').tooltip(),$(".main-menu").hasClass("noscroll")||$(window).scroll(function(){top=$(this).scrollTop()<100,stopResizeNav||currentTop==top||(currentTop=top,top?($(".main-menu").removeClass("header-scrolled"),$(".main-trans-white").addClass("text-white"),$(".main-menu-white-auto-mask").addClass("main-menu-white-fade-mask"),width>768&&($(".main-menu").css("padding-top","40px"),$(".main-menu").css("padding-bottom","30px"))):($(".main-trans-white").removeClass("text-white"),$(".main-menu").addClass("header-scrolled"),$(".main-menu-white-auto-mask").removeClass("main-menu-white-fade-mask"),width>768&&($(".main-menu").css("padding-top","15px"),$(".main-menu").css("padding-bottom","15px"))))}),$("body").append($('<div class="toast-overlay-wrapper position-fixed"></div>')),$("#footer_weixin").popover({trigger:"hover",html:!0,content:"<img src='/images/mmqrcode1543412167834.jpg' alt='mmqrcode' width=200 height=200/>",title:"扫一扫加我微信",placement:"top"}),$("#footer_qq").tooltip({title:"QQ 1501076885"}),$("#footer_github").tooltip({title:"访问我的 Github"})}function scrollToPos(top){$("body,html").animate({scrollTop:top},1e3)}function scrollToEle(id){if($(id).length>0){var top=$(id).offset().top-70;$("body,html").animate({scrollTop:top},1e3)}}function highlightChildCode($id){$("#"+$id+" pre code").each(function(i,block){$(this).html(replaceBlockBadChr($(this).html())),hljs.highlightBlock(block)})}function highlightAllCode(){$(".highlight pre code").each(function(i,block){$(this).html(replaceBlockBadChr($(this).html())),hljs.highlightBlock(block)})}function replaceBlockBadChr(str){return str.replace(/^\s+|\s+$/g,"")}var toasts=[],toastCurrentTop=15,toastCount=0;function toastTypeToIcon(type){switch(type){case"error":return'<i class="toast-icon fa fa-times-circle-o text-danger"></i>';case"warning":return'<i class="toast-icon fa fa-exclamation-triangle text-warning"></i>';case"info":return'<i class="toast-icon fa fa-info-circle text-primary"></i>';case"success":return'<i class="toast-icon fa fa-check-circle-o text-success"></i>';case"loading":return'<i class="toast-icon spinner-grow text-primary" style="width:26px;height:26px" role="status"></i>'}}function toastRemove(toast,$alert){toastCurrentTop-=$alert.height()+36,$alert.remove();for(var i=toasts.length-1,start=toasts.indexOf(toast);i>start;i--)toasts[i].top=toasts[i-1].top;for(var i=toasts.indexOf(toast),size=toasts.length;i<size-1;i++)toasts[i]=toasts[i+1],toasts[i].alert.css("top",toasts[i].top);toasts.pop(toasts[toasts.length-1]),toastCount--}function toastClose(toast,anim){$alert=toast.alert,"slide"==anim?$alert.slideUp(300,function(){toastRemove(toast,$(this))}):$alert.fadeOut(600,function(){toastRemove(toast,$(this))})}function toastClear(time,toast){setTimeout(function(){toastClose(toast)},time)}function toast(str,type,time){uidz+=parseInt(10*Math.random()),time||(time=2500);var top=toastCurrentTop;$newAlert=$('<div class="toast-alert" id="toast-'+uidz+'">'+toastTypeToIcon(type)+'<div class="toast-text">'+str+"</div></div>"),$(".toast-overlay-wrapper").append($newAlert),$newAlert.css("top",top+"px"),$newAlert.css("left",$(window).width()/2-$newAlert.width()/2+"px"),toastCurrentTop+=$newAlert.height()+36;var toast={alert:$newAlert,top:top};return toasts[toastCount]=toast,toastCount++,-1!=time&&toastClear(time,toast),toast}function getHostName(){var curWwwPath=window.document.location.href;0==curWwwPath.indexOf("https://")?curWwwPath=curWwwPath.substr(7):0==curWwwPath.indexOf("https://")&&(curWwwPath=curWwwPath.substr(8));var pathName=window.document.location.pathname;if(""==pathName)return curWwwPath;var pos=curWwwPath.indexOf(pathName);return curWwwPath.substring(0,pos)}window.onload=loaderStart;