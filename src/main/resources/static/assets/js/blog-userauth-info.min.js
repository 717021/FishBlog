var currentAuthedUser=null,initAuthendCallback=new Array,authInfoInited=!1,authInfoCalled=!1;function authLoadAuthInfo(){$.ajax({url:address_blog_api+"auth/auth-test",type:"get",contentType:"application/json; charset=utf-8",success:function(response){!isNullOrEmpty(response)&&response.success?(currentAuthedUser=response.data,genUserMenuInfo(currentAuthedUser),authCallcallbacks(initAuthendCallback,currentAuthedUser),authInfoInited=!0):authCallcallbacks(initAuthendCallback,null)},error:function(xhr,err){authCallcallbacks(initAuthendCallback,null),tocast("连接服务器异常 请检查您的连接？","error",5e3)}})}function authCallcallbacks(callbacks,u){callbacks.forEach(function(e){"function"==typeof e&&e(u)}),authInfoCalled=!0}function authSetInfoLoadFinishCallback(c){authInfoCalled?c(currentAuthedUser):initAuthendCallback.push(c)}setLoaderEndCallback(function(){authLoadAuthInfo()});