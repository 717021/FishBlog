var contentLoadStatus=0,contentTitleLoaded=0,contentPage=getQueryString("page");null!=contentPage&&""!=contentPage||(contentPage=getLastUrlAgrs(location.href).arg),"admin"==contentPage&&(contentPage="index"),contentPage&&""!=contentPage&&(appendLoaderJS("/assets/js/admin/dashboard-"+contentPage+".min.js"),setLoaderEndCallback(loadBase),setLoaderNotHideMask());var currentAuthedUser=null;function loadBase(){$.ajax({url:("index"==contentPage?"./dashboard-index":"../dashboard-"+contentPage)+".html",success:function(response){isNullOrEmpty(response)?(contentLoadStatus=-1,showInitError()):(contentLoadStatus=1,document.getElementById("dashboard_content").innerHTML=response,initAuthInfo(function(){initApp(),initBase()}))},error:function(xhr,err){contentLoadStatus=-2,showInitError()}})}function initBase(){var container=$(".side-panel li.side-has-children ul,.side-panel li.side-has-children ul li");$(window).width()<576&&($(".side-area").hide(),$(".dashboard-area").removeClass("side-open"),setTimeout(function(){$(".side-area").show()},400)),$(".side-panel .side-has-children ul").css("display","none"),$(".side-panel .side-has-children ul li a.active").parent().parent().attr("style","").parent().addClass("side-child-open"),$(".side-panel li.side-has-children").click(function(e){container.is(e.target)||0!==container.has(e.target).length||($(this).toggleClass("side-child-open"),$(this).find("ul").slideToggle())}),$(".side-area-switch").click(function(){$(".dashboard-area").toggleClass("side-open")})}function initAuthInfo(c){$.ajax({url:address_blog_api+"auth/auth-test",type:"get",contentType:"application/json; charset=utf-8",success:function(response){!isNullOrEmpty(response)&&response.success?(3==(currentAuthedUser=response.data).level&&(location.href="/sign-in/?redirect_url="+encodeURI(location.href)+"&error=RequestMorPrivilege"),genUserMenuInfo(currentAuthedUser),"undefined"!=typeof initAuthInfoEnd&&initAuthInfoEnd(currentAuthedUser),c(),setLoaderHideMaskNow()):"-3"==response.extendCode?location.href="/sign-in/?redirect_url="+encodeURI(location.href)+"&error=SessionOut":location.href="/sign-in/?redirect_url="+encodeURI(location.href)+"&error=RequestLogin"},error:function(xhr,err){swal("连接服务器异常","请检查您的连接？","error")}})}function showInitError(){initBase(),$("#dashboard_content").html('<div class="container" style="height:100%">    <div class="box full text-center text-danger d-flex justify-content-center align-items-center flex-column">        <i class=" fa fa-times-circle-o" aria-hidden="true" style="font-size: 3.5em"></i>        <p class="text-secondary mt-2"><span class="h4">加载失败</span> (T_T)</p>        <button type="button" class="btn btn-primary" onclick="location.reload(true)">重新加载</button>    </div>    </div>')}function gotoPage(page,thisPage){if(thisPage!=contentPage){var url=("index"==contentPage?".":"../"+page)+"/";thisPage?location.href=url:window.open(url)}}function isCurrentUrlAndActive(page){return contentPage==page?("index"==contentPage||contentTitleLoaded||($("title").text($("#admin-side-switch-"+page).text()+" "+$("title").text()),contentTitleLoaded=!0),"active"):""}