var main=new Vue({el:"#main",data:{message:"Hello Vue.js!",contentMainLoading:!1,contentMainLoadFailed:!1,contentMainLoadError:"",contentPosts:null,currentPostPage:0,allPostPage:0},methods:{loadPosts:function(){var url=blog_api_address+"posts/page/"+this.currentPostPage+"/15?sortBy=date",oldScrollTop=$("body,html").scrollTop();this.contentMainLoading=!0,$.ajax({url:url,success:function(response){main.contentMainLoading=!1,response.success?(main.allPostPage=response.data.totalPages,null==main.contentPosts?main.contentPosts=response.data.content:main.contentPosts=mergeJsonArray(main.contentPosts,response.data.content),main.contentPosts=main.resolvePostArr(main.contentPosts),main.currentPostPage++,$("body,html").scrollTop(oldScrollTop)):(main.contentMainLoadError=response.message,main.contentMainLoadFailed=!0)},error:function(xhr,err){main.contentMainLoadError=err,main.contentMainLoadFailed=!0}})},getDateString:function(str){return arr=str.split("-"),arr[0]+" 年 "+arr[1]+" 月"},getImageUrl:function(str){return getImageUrlFormHash(str)},getPostPrefix:function(prefixId){return getPostPrefix(prefixId)},getPostUrl:function(post){return getPostRealUrl(post)},resolvePostArr:function(arr){var new_arr={},i=0,y="";for(var key in arr)if(!arr[key].isHead){if(void 0!==arr[key].postDate){var this_y=arr[key].postDate.substr(0,4);this_y!=y&&(y=this_y,new_arr[i]={isHead:!0,year:this_y},i++)}new_arr[i]=arr[key],i++}return new_arr}}});setLoaderFinishCallback(function(){main.loadPosts(),setTimeout(function(){main.$refs.sideArea.loadAll()},500)});