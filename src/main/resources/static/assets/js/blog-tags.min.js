var main=new Vue({el:"#main",data:{message:"Hello Vue.js !",contentMainLoading:!1,contentMainLoadFailed:!1,contentMainLoadError:"",contentPosts:null,contentTagsLoaded:!1,contentTags:null,currentPostPage:0,allPostPage:0,contentLoadTag:"none",currentTagShow:"所有文章"},methods:{loadStart:function(){var currViewTag=getQueryString("tag");isNullOrEmpty(currViewTag)&&(currViewTag=getLastUrlAgrs(location.href)),isNumber(currViewTag.arg)&&(this.contentLoadTag=currViewTag.arg),this.loadTagPosts()},loadTagPosts:function(){var url=address_blog_api+"posts/page/"+this.currentPostPage+"/20?sortBy=date&onlyTag="+this.contentLoadTag,tags_url=address_blog_api+"tags",oldScrollTop=$("body,html").scrollTop();this.contentMainLoading=!0,$.ajax({url:url,success:function(response){main.contentMainLoading=!1,response.success?(main.allPostPage=response.data.totalPages,null==main.contentPosts?main.contentPosts=response.data.content:main.contentPosts=mergeJsonArray(main.contentPosts,response.data.content),main.currentPostPage++,$("body,html").scrollTop(oldScrollTop)):(main.contentMainLoadError=response.message,main.contentMainLoadFailed=!0)},error:function(xhr,err){main.contentMainLoadError=err,main.contentMainLoadFailed=!0}}),$.get(tags_url,function(response){if(response.success)for(var key in main.contentTagsLoaded=!0,main.contentTags=response.data,response.data)response.data[key].id==main.contentLoadTag&&(main.currentTagShow=response.data[key].name)},"json")},getDateString:function(str){return arr=str.split("-"),arr[0]+" 年 "+arr[1]+" 月"},getImageUrl:function(str){return getImageUrlFormHash(str)},getPostUrl:function(post){return getPostRealUrl(post)},getPostPrefix:function(prefixId){return getPostPrefix(prefixId)},goViewTag(tagId){location.href=partPositions.viewTag+tagId+"/"}}});setLoaderFinishCallback(function(){main.loadStart()});